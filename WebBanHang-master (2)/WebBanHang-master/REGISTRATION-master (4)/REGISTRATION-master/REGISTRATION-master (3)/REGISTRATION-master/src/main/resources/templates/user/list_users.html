<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="utf-8">
<title>Insert title here</title>
<link rel="stylesheet"
	href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
<script
	src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script
	src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
<script
	src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
<link rel="stylesheet"
	href="https://pro.fontawesome.com/releases/v5.10.0/css/all.css">
</head>
<body>
	<h1 style="text-align: center;">LIST_USERS</h1>
	<div th:replace="navbar :: navbar"></div>
	<div class="container text-center">
		<h1>List of all users</h1>
		<table class="table table-striped table-bordered" th:id="userTable">
			<thead class="table-dark">
				<tr>
					<td>IMAGE</td>
					<td>EMAIL</td>
					<td>FIRST NAME</td>
					<td>LAST NAME</td>
					<td>ROLE</td>
					<td th:if="${role}">ACTION</td>
				</tr>
			</thead>
			<tbody th:each="user1,status : ${users}">
				<tr th:id = "'row' + ${user1.id}">
					<th scope="row"><img alt=""
						th:src="*{'data:image/jpeg;base64,'+{user1.image}}"
						style="width: 100px; height: 100px;"></th>
					<td th:text=${user1.email}></td>
					<td th:text=${user1.firstName}></td>
					<td th:text=${user1.lastName}></td>
					<td th:text=${user1.user_role}></td>
					<td th:if="${role}">
						<div>
							<a th:href="@{'/deleteUserById/'+${user1.id}}" class="btn btn-danger link-remove" id="deleteUserButton"data-toggle="modal"
								data-target="#deleteUserModal" th:rowNumber = "${user1.id}" >Delete</a>
							<div class="modal" id="deleteUserModal" tabindex="-1"
								role="dialog">
								<div class="modal-dialog">
									<div class="modal-content">
										<div class="modal-header">
											<h4 class="modal-title">Modal Heading</h4>
											<button type="button" class="close" data-dismiss="modal">&times;</button>
										</div>
										<div class="modal-body" style="text-align:left;">Are you sure want to delete?</div>
										<div class="modal-footer">
											<a href=""
												id="delRef" type="submit"
												class="btn btn-primary link-remove"
												>Delete</a>
											<button type="button" class="btn btn-danger"
												data-dismiss="modal">Close</button>
										</div>

									</div>
								</div>
							</div>
						</div>
					</td>
				</tr>
			</tbody>
		</table>
	</div>
	<script type="text/javascript">
		var contextPath = "[[@{/}]]";
		var csrfHeader = "[[${_csrf.headerName}]]";
		var csrfToken = "[[${_csrf.token}]]";
	</script>
	<script th:src="@{/js/userAction.js}"></script>
</body>
</html>