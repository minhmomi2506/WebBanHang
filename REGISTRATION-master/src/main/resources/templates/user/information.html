<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="utf-8">
<title>Insert title here</title>
<link rel="stylesheet"
	href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
<script
	src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script
	src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
<script
	src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
<link rel="stylesheet"
	href="https://pro.fontawesome.com/releases/v5.10.0/css/all.css">
</head>
<body>
	<h1 style="text-align: center;">YOUR INFORMATION</h1>
	<div th:replace="navbar :: navbar"></div>
	<table class="table table-striped table-bordered">
		<thead class="table-dark">
			<tr>
				<td>IMAGE</td>
				<td>EMAIL</td>
				<td>FULL NAME</td>
				<td>PHONE NUMBER</td>
				<td>ROLE</td>
				<td>ACTION</td>
				<td th:if="${role}">WATCH YOUR HISTORY OF SELLING PRODUCT</td>
				<td th:unless="${role}">WATCH YOUR HISTORY OF BUYING</td>
			</tr>
		</thead>
		<tbody>
			<tr th:object="${user}">
				<th scope="row"><a href="" data-toggle="modal"
					data-target="#changeImageModal"><img alt=""
						th:src="*{'data:image/jpeg;base64,'+{image}}"
						style="width: 100px; height: 100px;"></a></th>
				<td th:text=${user.email}></td>
				<td th:text=${user.fullName}></td>
				<td th:text=${user.phoneNumber}></td>
				<td th:text=${user.user_role}></td>
				<td><a th:href="@{'/edit/'+${user.id}}" class="fa fa-pencil"
					data-toggle="modal" data-target="#changeInfoModal"></a></td>
				<td><a th:href="@{/listBill}" class="fas fa-list-ul"></a></td>
			</tr>
		</tbody>
	</table>
	<div class="modal" id="changeImageModal" tabindex="-1" role="dialog">
		<form th:action="@{/editUserImage}" enctype="multipart/form-data"
			th:object="${user}" method="post">
			<div class="modal-dialog">
				<div class="modal-content">
					<div class="modal-body" style="text-align: center;">
						<img alt="" th:src="*{'data:image/jpeg;base64,'+{image}}"
							style="width: 200px; height: 200px;" id="myImage"> <input
							type="file" name="file"
							onchange="ShowImagePreview(this,document.getElementById('myImage'))">
						<button type="submit">Save</button>
					</div>
				</div>
			</div>
		</form>
	</div>
	<div class="modal" id="changeInfoModal" tabindex="-1" role="dialog">
		<div class="modal-dialog">
			<div class="modal-content">
				<div class="modal-header">
					<h4 class="modal-title">EDIT USER</h4>
					<button type="button" class="close" data-dismiss="modal">&times;</button>
				</div>
				<div class="modal-body">
					<form th:action="@{/editUser}" method="post"
						enctype="multipart/form-data" th:object="${user}">
						<div class="form-group">
							<input type="text" class="form-control" id="id" name="id"
								th:field="*{id}" style="width: 350px;" hidden="hidden">
						</div>
						<div class="form-group">
							<label for="firstName">FULL NAME:</label> <input type="text"
								class="form-control" id="fullName" name="fullName"
								th:field="*{fullName}" style="width: 350px;" required="required">
						</div>
						<div class="form-group">
							<label for="password">PASSWORD:</label> <input type="text"
								class="form-control" id="password" name="password"
								th:field="*{password}" style="width: 350px;" required="required">
						</div>
						<div class="form-group">
							<label for="firstName">PHONE NUMBER:</label> <input type="text"
								class="form-control" id="phoneNumber" name="phoneNumber"
								th:field="*{phoneNumber}" style="width: 350px;" required="required">
						</div>
						<button type="submit">SUBMIT</button>

					</form>
				</div>
			</div>
		</div>
	</div>
	<script type="text/javascript"></script>
	<script th:src="@{/js/showImage.js}"></script>
</body>
</html>