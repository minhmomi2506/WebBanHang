<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Edit Bill</title>

<!-- Google Font: Source Sans Pro -->
<link rel="stylesheet"
	href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,400i,700&display=fallback">
<!-- Font Awesome -->
<link rel="stylesheet" href="plugins/fontawesome-free/css/all.min.css">
<!-- Ionicons -->
<link rel="stylesheet"
	href="https://code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css">
<!-- Tempusdominus Bootstrap 4 -->
<link rel="stylesheet"
	href="plugins/tempusdominus-bootstrap-4/css/tempusdominus-bootstrap-4.min.css">
<!-- iCheck -->
<link rel="stylesheet"
	href="plugins/icheck-bootstrap/icheck-bootstrap.min.css">
<!-- JQVMap -->
<link rel="stylesheet" href="plugins/jqvmap/jqvmap.min.css">
<!-- Theme style -->
<link rel="stylesheet" href="dist/css/adminlte.min.css">
<!-- overlayScrollbars -->
<link rel="stylesheet"
	href="plugins/overlayScrollbars/css/OverlayScrollbars.min.css">
<!-- Daterange picker -->
<link rel="stylesheet"
	href="plugins/daterangepicker/daterangepicker.css">
<!-- summernote -->
<link rel="stylesheet" href="plugins/summernote/summernote-bs4.min.css">
<link rel="stylesheet"
	href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
<script
	src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script
	src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
<script
	src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
<script src="plugins/jquery/jquery.min.js"></script>
<!-- jQuery UI 1.11.4 -->
<script src="plugins/jquery-ui/jquery-ui.min.js"></script>
<!-- Resolve conflict in jQuery UI tooltip with Bootstrap tooltip -->
<script>
	$.widget.bridge('uibutton', $.ui.button)
</script>
<!-- Bootstrap 4 -->
<script src="plugins/bootstrap/js/bootstrap.bundle.min.js"></script>
<!-- ChartJS -->
<script src="plugins/chart.js/Chart.min.js"></script>
<!-- Sparkline -->
<script src="plugins/sparklines/sparkline.js"></script>
<!-- JQVMap -->
<script src="plugins/jqvmap/jquery.vmap.min.js"></script>
<script src="plugins/jqvmap/maps/jquery.vmap.usa.js"></script>
<!-- jQuery Knob Chart -->
<script src="plugins/jquery-knob/jquery.knob.min.js"></script>
<!-- daterangepicker -->
<script src="plugins/moment/moment.min.js"></script>
<script src="plugins/daterangepicker/daterangepicker.js"></script>
<!-- Tempusdominus Bootstrap 4 -->
<script
	src="plugins/tempusdominus-bootstrap-4/js/tempusdominus-bootstrap-4.min.js"></script>
<!-- Summernote -->
<script src="plugins/summernote/summernote-bs4.min.js"></script>
<!-- overlayScrollbars -->
<script
	src="plugins/overlayScrollbars/js/jquery.overlayScrollbars.min.js"></script>
<!-- AdminLTE App -->
<script src="dist/js/adminlte.js"></script>
<!-- AdminLTE for demo purposes -->
<script src="dist/js/demo.js"></script>
<!-- AdminLTE dashboard demo (This is only for demo purposes) -->
<script src="dist/js/pages/dashboard.js"></script>
<link rel="stylesheet"
	href="https://pro.fontawesome.com/releases/v5.10.0/css/all.css">
<link rel="stylesheet" type="text/css"
	th:href="@{/css/dropDownList.css}" />
</head>
<body class="hold-transition sidebar-mini layout-fixed">
	<div class="wrapper">

		<!-- Preloader -->
		<div
			class="preloader flex-column justify-content-center align-items-center">
			<img class="animation__shake" src="dist/img/AdminLTELogo.png"
				alt="AdminLTELogo" height="60" width="60">
		</div>

		<!-- Navbar -->
		<nav
			class="main-header navbar navbar-expand navbar-white navbar-light">
			<!-- Left navbar links -->
			<ul class="navbar-nav">
				<li class="nav-item"><a class="nav-link" data-widget="pushmenu"
					href="#" role="button"><i class="fas fa-bars"></i></a></li>
				<li class="nav-item d-none d-sm-inline-block"><a th:href="@{/}"
					class="nav-link">Home</a></li>
				<li class="nav-item d-none d-sm-inline-block"><a href="#"
					class="nav-link">Contact</a></li>
			</ul>

			<!-- Right navbar links -->
			<ul class="navbar-nav ml-auto">
				<!-- Navbar Search -->
				<li class="nav-item"><a class="nav-link"
					data-widget="navbar-search" href="#" role="button"> <i
						class="fas fa-search"></i>
				</a>
					<div class="navbar-search-block">
						<form class="form-inline" th:action="@{/searchProduct}"
							method="get">
							<div class="input-group input-group-sm">
								<input class="form-control form-control-navbar" type="search"
									placeholder="Search" aria-label="Search" name="productName"
									id="productName"> <input type="number" name="minp"
									style="width: 100px; text-align: right;" value="0"><span
									style="color: white;">đến</span><input type="number"
									name="maxp" style="width: 100px; text-align: right;"
									value="100000000">
								<div class="input-group-append">
									<button class="btn btn-navbar" type="submit">
										<i class="fas fa-search"></i>
									</button>
									<button class="btn btn-navbar" type="button"
										data-widget="navbar-search">
										<i class="fas fa-times"></i>
									</button>
								</div>
							</div>
						</form>
					</div></li>

				<!-- Messages Dropdown Menu -->
				</a>
				<!-- Notifications Dropdown Menu -->
			</ul>
		</nav>
		<!-- /.navbar -->

		<!-- Main Sidebar Container -->
		<aside class="main-sidebar sidebar-dark-primary elevation-4">
			<!-- Brand Logo -->
			<a href="index3.html" class="brand-link"> <img
				src="dist/img/AdminLTELogo.png" alt="AdminLTE Logo"
				class="brand-image img-circle elevation-3" style="opacity: .8">
				<span class="brand-text font-weight-light">AdminLTE 3</span>
			</a>

			<!-- Sidebar -->
			<div class="sidebar">
				<!-- Sidebar user panel (optional) -->
				<div class="user-panel mt-3 pb-3 mb-3 d-flex" th:object="${user}">
					<div class="image">
						<img th:src="*{'data:image/jpeg;base64,'+{image}}"
							class="img-circle elevation-2" alt="User Image">
					</div>
					<div class="info">
						<a th:href="@{'/info/'+${user.id}}" class="d-block">[[*{fullName}]]</a>
					</div>
				</div>

				<!-- SidebarSearch Form -->
				<div class="form-inline">
					<div class="input-group" data-widget="sidebar-search">
						<input class="form-control form-control-sidebar" type="search"
							placeholder="Search" aria-label="Search">
						<div class="input-group-append">
							<button class="btn btn-sidebar">
								<i class="fas fa-search fa-fw"></i>
							</button>
						</div>
					</div>
				</div>

				<!-- Sidebar Menu -->
				<nav class="mt-2">
					<ul class="nav nav-pills nav-sidebar flex-column"
						data-widget="treeview" role="menu" data-accordion="false">
						<!-- Add icons to the links using the .nav-icon class
               with font-awesome or any other icon font library -->
						<li class="nav-item menu-close"><a href="#"
							class="nav-link active"> <i
								class="nav-icon fas fa-tachometer-alt"></i>
								<p>
									Danh mục <i class="right fas fa-angle-left"></i>
								</p>
						</a>
							<ul class="nav nav-treeview">
								<li class="nav-item"><a th:href="@{/taiNghe}"
									class="nav-link active"> <i class="far fa-circle nav-icon"></i>
										<p>Tai nghe</p>
								</a></li>
								<li class="nav-item"><a th:href="@{/taiNgheKhongDay}"
									class="nav-link active"> <i class="far fa-circle nav-icon"></i>
										<p>Tai nghe không dây</p>
								</a></li>
								<li class="nav-item"><a th:href="@{/taiNgheBluetooth}"
									class="nav-link active"> <i class="far fa-circle nav-icon"></i>
										<p>Tai nghe bluetooth</p>
								</a></li>
								<li class="nav-item"><a th:href="@{/dienThoai}"
									class="nav-link"> <i class="far fa-circle nav-icon"></i>
										<p>Điện thoại</p>
								</a></li>
								<li class="nav-item"><a th:href="@{/dienThoaiSamsung}"
									class="nav-link"> <i class="far fa-circle nav-icon"></i>
										<p>Điện thoại Samsung</p>
								</a></li>
								<li class="nav-item"><a th:href="@{/dienThoaiIphone}"
									class="nav-link"> <i class="far fa-circle nav-icon"></i>
										<p>Điện thoại iphone</p>
								</a></li>
								<li class="nav-item"><a th:href="@{/dienThoaiXiaomi}"
									class="nav-link"> <i class="far fa-circle nav-icon"></i>
										<p>Điện thoại Xiaomi</p>
								</a></li>
								<li class="nav-item"><a th:href="@{/dienThoaiXiaomi}"
									class="nav-link"> <i class="far fa-circle nav-icon"></i>
										<p>Điện thoại Huawei</p>
								</a></li>
								<li class="nav-item"><a th:href="@{/laptop}"
									class="nav-link"> <i class="far fa-circle nav-icon"></i>
										<p>Laptop</p>
								</a></li>
								<li class="nav-item"><a th:href="@{/laptopApple}"
									class="nav-link"> <i class="far fa-circle nav-icon"></i>
										<p>Laptop Apple</p>
								</a></li>
								<li class="nav-item"><a th:href="@{/laptopASUS}"
									class="nav-link"> <i class="far fa-circle nav-icon"></i>
										<p>Laptop ASUS</p>
								</a></li>
								<li class="nav-item"><a th:href="@{/laptopDell}"
									class="nav-link"> <i class="far fa-circle nav-icon"></i>
										<p>Laptop Dell</p>
								</a></li>
								<li class="nav-item"><a th:href="@{/laptopHp}"
									class="nav-link"> <i class="far fa-circle nav-icon"></i>
										<p>Laptop HP</p>
								</a></li>
								<li class="nav-item"><a th:href="@{/laptopLenovo}"
									class="nav-link"> <i class="far fa-circle nav-icon"></i>
										<p>Laptop Lenovo</p>
								</a></li>
							</ul></li>
						<li class="nav-header" style="font-weight: bold;" th:if="${role}">SẢN
							PHẨM</li>

						<li class="nav-item" th:if="${role}"><a
							th:href="@{/addProduct}" class="nav-link" data-toggle="modal"
							data-target="#addProductModal"> <i
								class="nav-icon fas fa-plus"></i>
							<p>Thêm sản phẩm</p>

						</a></li>
						<li class="nav-header" style="font-weight: bold;" th:if="${role}">KHÁCH
							HÀNG</li>
						<li class="nav-item" th:if="${role}"><a
							th:href="@{/list_users}" class="nav-link"> <i
								class="nav-icon far fa-calendar-alt"></i>
								<p>Danh sách khách hàng</p>
						</a></li>
						<li class="nav-item"><a href="#" class="nav-link"
							th:if="${role}"> <i class="nav-icon fas fa-search"></i>
								<p>
									Search <i class="fas fa-angle-left right"></i>
								</p>
						</a>
							<ul class="nav nav-treeview">
								<li class="nav-item"><a href="pages/search/simple.html"
									class="nav-link"> <i class="far fa-circle nav-icon"></i>
										<p>Simple Search</p>
								</a></li>
								<li class="nav-item"><a href="pages/search/enhanced.html"
									class="nav-link"> <i class="far fa-circle nav-icon"></i>
										<p>Enhanced</p>
								</a></li>
							</ul></li>
						<li class="nav-header" style="font-weight: bold;" th:if="${role}">BÁN
							HÀNG</li>
						<li class="nav-item"><a th:href="@{/listBill}"
							class="nav-link" th:if="${role}"> <i
								class="nav-icon fas fa-list-ul"></i>
								<p>Lịch sử bán hàng</p>
						</a></li>
						<li class="nav-header" style="font-weight: bold;"
							th:unless="${role}">MUA HÀNG</li>
						<li class="nav-item"><a th:href="@{/listBill}"
							class="nav-link" th:unless="${role}"> <i
								class="nav-icon fas fa-ellipsis-h"></i>
								<p>Lịch sử mua hàng</p>
						</a></li>
						<li class="nav-header" style="font-weight: bold;">THAO TÁC
							KHÁC</li>
						<li class="nav-item"><a th:href="@{/logout}" class="nav-link">
								<i class="nav-icon fa fa-sign-out"></i>
								<p>Đăng xuất</p>
						</a></li>
					</ul>
				</nav>
				<!-- /.sidebar-menu -->
			</div>
			<!-- /.sidebar -->
		</aside>

		<!-- Content Wrapper. Contains page content -->
		<div class="content-wrapper">
			<!-- Content Header (Page header) -->
			<div class="content-header">
				<div class="container-fluid">
					<div class="row mb-2">
						<div class="col-sm-6">
							<h1 class="m-0">Dashboard</h1>
						</div>
						<!-- /.col -->
						<div class="col-sm-6">
							<ol class="breadcrumb float-sm-right">
								<li class="breadcrumb-item"><a th:href="@{/}">Home</a></li>
								<li class="nav-item" th:unless="${role}">/<a
									th:href="@{/cart}" class="nav-link fa fa-shopping-cart"
									style="color: black;"></a></li>
							</ol>
						</div>
						<!-- /.col -->
					</div>
					<!-- /.row -->
				</div>
				<!-- /.container-fluid -->
			</div>
			<!-- /.content-header -->
			<div class="modal" id="addProductModal" tabindex="-1" role="dialog">
				<div class="modal-dialog">
					<div class="modal-content">
						<div class="modal-header">
							<h4 class="modal-title">ADD PRODUCT</h4>
							<button type="button" class="close" data-dismiss="modal">&times;</button>
						</div>
						<div class="modal-body">
							<form class="text-center border border-light p-5"
								th:action="@{/addP}" method="post" enctype="multipart/form-data">

								<!-- Name -->
								<input type="text" name="name" id="name"
									class="form-control mb-4" placeholder="Product Name">

								<!-- Price -->
								<input type="number" name="price" id="price"
									class="form-control mb-4" placeholder="Product Price"
									required="required">

								<!-- Description -->
								<input type="text" name="description" id="description"
									class="form-control mb-4" placeholder="Product Description">


								<input type="number" name="number" id="number"
									class="form-control mb-4" placeholder="Product Number">

								<div class="custom-file mb-4">
									<img alt="" src="" style="width: 200px; height: 200px;"
										id="productImage">
									<div></div>
									<input type="file" name="file"
										onchange="ShowImagePreview(this,document.getElementById('productImage'))"
										style="text-align: center;">
								</div>

								<div class="custom-file mb-4">
									<select name="category" required="required">
										<option th:each="category : ${categories}"
											th:value="${category.id}" th:text=${category.categoryName}></option>
									</select>
								</div>
								<button class="btn btn-info btn-block" type="submit"
									id="addProduct">add</button>
							</form>
						</div>
					</div>
				</div>
			</div>
			<!-- Main content -->
			<section class="content">
				<div class="col-12">
					<hr>
					<table class="table" id="productTable">
						<thead class="thead-dark">
							<tr>
								<th scope="col">IMAGE</th>
								<th scope="col">NAME</th>
								<th scope="col">CATEGORY</th>
								<th scope="col">DESCRIPTION</th>
								<th scope="col">PRICE(VND)</th>
								<th scope="col">NUMBER</th>
								<th scope="col" th:if="${role}">ACTION</th>
								<th scope="col" th:unless="${role}">BUY</th>
							</tr>
						</thead>
						<tbody th:each="product , status : ${products}">
							<tr th:id="'row' + ${product.id}">
								<th scope="row"><img alt=""
									th:src="*{'data:image/jpeg;base64,'+{product.image}}"
									style="width: 100px; height: 100px;"></th>
								<td>[[*{product.name}]]</td>
								<td>[[*{product.category.categoryName}]]</td>
								<td>[[*{product.description}]]</td>
								<td>[[*{product.price}]]</td>
								<td>[[*{product.number}]]</td>
								<td th:if="${role}"><a
									th:href="@{'/deleteProductById/'+${product.id}}"
									class="fa fa-trash link-remove" id="deleteProductButton"
									data-toggle="modal" data-target="#deleteProductModal"
									th:rowNumber="${product.id}"></a> &nbsp; <a
									th:href="@{'/edit/'+${product.id}}" class="fa fa-pencil"></a></td>
								<td th:unless="${role}"><a
									th:href="@{'/buyProduct/'+${product.id}}" class="fa fa-plus"></a></td>
							</tr>
						</tbody>
					</table>
					<hr>
				</div>
			</section>
			<!-- /.content -->
		</div>
		<!-- /.content-wrapper -->
		<footer class="main-footer">
			<strong>Copyright &copy; 2014-2021 <a
				href="https://adminlte.io">AdminLTE.io</a>.
			</strong> All rights reserved.
			<div class="float-right d-none d-sm-inline-block">
				<b>Version</b> 3.1.0
			</div>
		</footer>

		<!-- Control Sidebar -->
		<aside class="control-sidebar control-sidebar-dark">
			<!-- Control sidebar content goes here -->
		</aside>
		<!-- /.control-sidebar -->
	</div>
	<!-- ./wrapper -->

	<!-- jQuery -->
	<div class="modal" id="deleteProductModal" tabindex="-1" role="dialog">
		<div class="modal-dialog">
			<div class="modal-content">
				<div class="modal-header">
					<h4 class="modal-title">Modal Heading</h4>
					<button type="button" class="close" data-dismiss="modal">&times;</button>
				</div>
				<div class="modal-body">Are you sure want to delete?</div>
				<div class="modal-footer">
					<a href="" id="delRef" class="btn btn-primary link-remove">Delete</a>
					<button type="button" class="btn btn-danger" data-dismiss="modal">Close</button>
				</div>

			</div>
		</div>
	</div>
	<script type="text/javascript">
		var contextPath = "[[@{/}]]";
		var csrfHeader = "[[${_csrf.headerName}]]";
		var csrfToken = "[[${_csrf.token}]]";
	</script>
	<script th:src="@{/js/productAction.js}"></script>
	<script th:src="@{/js/showImagePreview.js}"></script>
</body>
</html>
